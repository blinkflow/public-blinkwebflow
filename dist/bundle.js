/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_GlobalBlink_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/GlobalBlink.js */ \"./src/lib/GlobalBlink.js\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  window.Blink = new _lib_GlobalBlink_js__WEBPACK_IMPORTED_MODULE_0__.GlobalBlink();\n});\n\n//# sourceURL=webpack://public-blinkwebflow/./src/index.js?");

/***/ }),

/***/ "./src/lib/Cart.js":
/*!*************************!*\
  !*** ./src/lib/Cart.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Cart: () => (/* binding */ Cart)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/lib/utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * Handles cart operations and state management.\n */\nvar Cart = /*#__PURE__*/function () {\n  /**\n   * @param {object} shopifyClient - Shopify client instance.\n   * @param {object} productManager - Product manager instance.\n   * @param {string} [storageKey=\"blink_cart\"] - Key for localStorage.\n   */\n  function Cart(shopifyClient, productManager) {\n    var storageKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"blink_cart\";\n    _classCallCheck(this, Cart);\n    this.shopifyClient = shopifyClient;\n    this.productManager = productManager;\n    this._cartStorageKey = storageKey;\n    this._cart = null;\n    this.cartId = null;\n    this._templates = {};\n    this._moneyFormat = \"{{amount}}{{currency_code}}\";\n    this._cartCacheTTL = 1000 * 60 * 10 * 24; // 1 DAY\n    this.onCartChange = null; // callback for UI updates\n  }\n\n  /**\n   * Initializes the cart, loading from cache if available.\n   * @returns {Promise<void>}\n   */\n  return _createClass(Cart, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var cachedCart, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return this._fetchShopMoneyFormat();\n            case 1:\n              _context.p = 1;\n              cachedCart = _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.get(this._cartStorageKey);\n              if (cachedCart) {\n                this._cart = cachedCart;\n                this.cartId = this._cart.id;\n                console.info(\"[Blink] Cart loaded from localStorage:\", this._cart);\n              }\n              _context.n = 3;\n              break;\n            case 2:\n              _context.p = 2;\n              _t = _context.v;\n              console.warn(\"[Blink] Invalid or expired cart, resetting...\");\n              _context.n = 3;\n              return this.clearCart();\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, this, [[1, 2]]);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * Fetches and sets the shop's money format.\n     * @returns {Promise<void>}\n     * @private\n     */\n    )\n  }, {\n    key: \"_fetchShopMoneyFormat\",\n    value: (function () {\n      var _fetchShopMoneyFormat2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _res$data, _res$data2;\n        var cached, info, query, res, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              // Try to load from localStorage first\n              cached = _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.get(\"blink_shop_info\");\n              if (!cached) {\n                _context2.n = 3;\n                break;\n              }\n              _context2.p = 1;\n              info = cached;\n              this._moneyFormat = info.moneyFormat || \"{{amount}}{{currency_code}}\";\n              // Optionally, you could also set shopName here if needed\n              return _context2.a(2);\n            case 2:\n              _context2.p = 2;\n              _t2 = _context2.v;\n            case 3:\n              query = \"\\n        {\\n            shop {\\n                name\\n                moneyFormat\\n            }\\n        }\\n        \";\n              _context2.n = 4;\n              return this.shopifyClient.executeQuery(query);\n            case 4:\n              res = _context2.v;\n              this._moneyFormat = (res === null || res === void 0 || (_res$data = res.data) === null || _res$data === void 0 || (_res$data = _res$data.shop) === null || _res$data === void 0 ? void 0 : _res$data.moneyFormat) || \"{{amount}}{{currency_code}}\";\n              // Cache shop info for later use\n              if (res !== null && res !== void 0 && (_res$data2 = res.data) !== null && _res$data2 !== void 0 && _res$data2.shop) {\n                _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.set(\"blink_shop_info\", {\n                  shopName: res.data.shop.name,\n                  moneyFormat: res.data.shop.moneyFormat\n                }, 1000 * 60 * 60 // 1 hour TTL for shop info\n                );\n              }\n            case 5:\n              return _context2.a(2);\n          }\n        }, _callee2, this, [[1, 2]]);\n      }));\n      function _fetchShopMoneyFormat() {\n        return _fetchShopMoneyFormat2.apply(this, arguments);\n      }\n      return _fetchShopMoneyFormat;\n    }()\n    /**\n     * Adds a variant to the cart.\n     * @param {object} params\n     * @param {string} params.variantId - The variant ID.\n     * @param {number} [params.quantity=1] - Quantity to add.\n     * @returns {Promise<object>} The updated cart.\n     */\n    )\n  }, {\n    key: \"addToCart\",\n    value: (function () {\n      var _addToCart = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(_ref) {\n        var variantId, _ref$quantity, quantity, cart;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              variantId = _ref.variantId, _ref$quantity = _ref.quantity, quantity = _ref$quantity === void 0 ? 1 : _ref$quantity;\n              if (this._cart) {\n                _context3.n = 3;\n                break;\n              }\n              _context3.n = 1;\n              return this._createCart(variantId, quantity);\n            case 1:\n              cart = _context3.v;\n              this.cartId = cart.id;\n              _context3.n = 2;\n              return this.refreshCart();\n            case 2:\n              return _context3.a(2, this._cart);\n            case 3:\n              _context3.n = 4;\n              return this._addToExistingCart(variantId, quantity);\n            case 4:\n              _context3.n = 5;\n              return this.refreshCart();\n            case 5:\n              return _context3.a(2, this._cart);\n            case 6:\n              return _context3.a(2);\n          }\n        }, _callee3, this);\n      }));\n      function addToCart(_x) {\n        return _addToCart.apply(this, arguments);\n      }\n      return addToCart;\n    }()\n    /**\n     * Creates a new cart with the given variant and quantity.\n     * @param {string} variantId\n     * @param {number} quantity\n     * @returns {Promise<object>} The created cart.\n     * @private\n     */\n    )\n  }, {\n    key: \"_createCart\",\n    value: (function () {\n      var _createCart2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(variantId, quantity) {\n        var query, variables, response;\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              query = \"\\n            mutation cartCreate($input: CartInput!) {\\n                cartCreate(input: $input) {\\n                 cart {\\n                    id\\n                }\\n                userErrors {\\n                    field\\n                    message\\n                }\\n                }\\n            }\\n            \";\n              variables = {\n                input: {\n                  lines: [{\n                    quantity: quantity,\n                    merchandiseId: variantId\n                  }]\n                }\n              };\n              _context4.n = 1;\n              return this.shopifyClient.executeQuery(query, variables);\n            case 1:\n              response = _context4.v;\n              if (!(response.userErrors && response.userErrors.length > 0)) {\n                _context4.n = 2;\n                break;\n              }\n              console.error(\"[Blink] Shopify user errors:\", response.userErrors);\n              throw new Error(\"Failed to create cart: \" + response.userErrors[0].message);\n            case 2:\n              return _context4.a(2, response.data.cartCreate.cart);\n          }\n        }, _callee4, this);\n      }));\n      function _createCart(_x2, _x3) {\n        return _createCart2.apply(this, arguments);\n      }\n      return _createCart;\n    }()\n    /**\n     * Adds a variant to an existing cart.\n     * @param {string} variantId\n     * @param {number} quantity\n     * @returns {Promise<object>} The updated cart.\n     * @private\n     */\n    )\n  }, {\n    key: \"_addToExistingCart\",\n    value: (function () {\n      var _addToExistingCart2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(variantId, quantity) {\n        var query, variables, res;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.n) {\n            case 0:\n              query = \"\\n            mutation cartLinesAdd($cartId: ID!, $lines: [CartLineInput!]!) {\\n                cartLinesAdd(cartId: $cartId, lines: $lines) {\\n                cart {\\n                    id\\n                }\\n                userErrors {\\n                    field\\n                    message\\n                }\\n                }\\n            }\\n            \";\n              variables = {\n                cartId: this.cartId,\n                lines: [{\n                  quantity: quantity,\n                  merchandiseId: variantId\n                }]\n              };\n              _context5.n = 1;\n              return this.shopifyClient.executeQuery(query, variables);\n            case 1:\n              res = _context5.v;\n              if (!(res.data.cartLinesAdd.userErrors && res.data.cartLinesAdd.userErrors.length > 0)) {\n                _context5.n = 2;\n                break;\n              }\n              console.error(\"[Blink] Shopify user errors:\", res.data.cartLinesAdd.userErrors);\n              throw new Error(\"Failed to add to cart: \" + res.data.cartLinesAdd.userErrors[0].message);\n            case 2:\n              return _context5.a(2, res.data.cartLinesAdd.cart);\n          }\n        }, _callee5, this);\n      }));\n      function _addToExistingCart(_x4, _x5) {\n        return _addToExistingCart2.apply(this, arguments);\n      }\n      return _addToExistingCart;\n    }()\n    /**\n     * Fetches the cart by ID.\n     * @param {string} cartId\n     * @returns {Promise<object|null>} The cart object or null.\n     */\n    )\n  }, {\n    key: \"fetchCart\",\n    value: (function () {\n      var _fetchCart = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(cartId) {\n        var query, variables, res;\n        return _regenerator().w(function (_context6) {\n          while (1) switch (_context6.n) {\n            case 0:\n              query = \"\\n            query getCart($cartId: ID!) {\\n            cart(id: $cartId) {\\n                id\\n                checkoutUrl\\n                createdAt\\n                updatedAt\\n                totalQuantity\\n\\n                lines(first: 50) {\\n                edges {\\n                    node {\\n                    id\\n                    quantity\\n                    attributes {\\n                        key\\n                        value\\n                    }\\n                    cost {\\n                        amountPerQuantity {\\n                        amount\\n                        currencyCode\\n                        }\\n                        totalAmount {\\n                        amount\\n                        currencyCode\\n                        }\\n                    }\\n                    merchandise {\\n                        ... on ProductVariant {\\n                        id\\n                        title\\n                        sku\\n                        availableForSale\\n                        quantityAvailable\\n                        image {\\n                            url\\n                            altText\\n                        }\\n                        price {\\n                            amount\\n                            currencyCode\\n                        }\\n                        product {\\n                            id\\n                            title\\n                            handle\\n                            vendor\\n                            featuredImage {\\n                            url\\n                            altText\\n                            }\\n                        }\\n                        }\\n                    }\\n                    sellingPlanAllocation {\\n                        sellingPlan {\\n                        id\\n                        name\\n                        options {\\n                            name\\n                            value\\n                        }\\n                        }\\n                    }\\n                    }\\n                }\\n                }\\n\\n                estimatedCost {\\n                subtotalAmount {\\n                    amount\\n                    currencyCode\\n                }\\n                totalAmount {\\n                    amount\\n                    currencyCode\\n                }\\n                totalTaxAmount {\\n                    amount\\n                    currencyCode\\n                }\\n                }\\n            }\\n            }\\n        \";\n              variables = {\n                cartId: cartId\n              };\n              _context6.n = 1;\n              return this.shopifyClient.executeQuery(query, variables);\n            case 1:\n              res = _context6.v;\n              if (!res.errors) {\n                _context6.n = 2;\n                break;\n              }\n              console.error(\"[Blink] Error fetching cart:\", res.errors);\n              return _context6.a(2, null);\n            case 2:\n              return _context6.a(2, res.data.cart);\n          }\n        }, _callee6, this);\n      }));\n      function fetchCart(_x6) {\n        return _fetchCart.apply(this, arguments);\n      }\n      return fetchCart;\n    }()\n    /**\n     * Clears all items from the cart.\n     * @returns {Promise<void>}\n     */\n    )\n  }, {\n    key: \"clearCart\",\n    value: (function () {\n      var _clearCart = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {\n        var lineIds, query, variables;\n        return _regenerator().w(function (_context7) {\n          while (1) switch (_context7.n) {\n            case 0:\n              if (!(this._cart && this._cart.lines && this._cart.lines.edges.length > 0)) {\n                _context7.n = 3;\n                break;\n              }\n              lineIds = this._cart.lines.edges.map(function (edge) {\n                return edge.node.id;\n              });\n              if (!(lineIds.length > 0)) {\n                _context7.n = 1;\n                break;\n              }\n              query = \"\\n                mutation cartLinesRemove($cartId: ID!, $lineIds: [ID!]!) {\\n                    cartLinesRemove(cartId: $cartId, lineIds: $lineIds) {\\n                        cart { id }\\n                        userErrors { field message }\\n                    }\\n                }\\n            \";\n              variables = {\n                cartId: this.cartId,\n                lineIds: lineIds\n              };\n              _context7.n = 1;\n              return this.shopifyClient.executeQuery(query, variables);\n            case 1:\n              _context7.n = 2;\n              return this.refreshCart();\n            case 2:\n              _context7.n = 4;\n              break;\n            case 3:\n              _context7.n = 4;\n              return this.refreshCart();\n            case 4:\n              return _context7.a(2);\n          }\n        }, _callee7, this);\n      }));\n      function clearCart() {\n        return _clearCart.apply(this, arguments);\n      }\n      return clearCart;\n    }()\n    /**\n     * Removes a line item from the cart.\n     * @param {string} lineId\n     * @returns {Promise<void>}\n     */\n    )\n  }, {\n    key: \"removeLineItem\",\n    value: (function () {\n      var _removeLineItem = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(lineId) {\n        var query, variables;\n        return _regenerator().w(function (_context8) {\n          while (1) switch (_context8.n) {\n            case 0:\n              query = \"\\n        mutation cartLinesRemove($cartId: ID!, $lineIds: [ID!]!) {\\n            cartLinesRemove(cartId: $cartId, lineIds: $lineIds) {\\n                cart { id }\\n                userErrors { field message }\\n            }\\n        }\\n    \";\n              variables = {\n                cartId: this.cartId,\n                lineIds: [lineId]\n              };\n              _context8.n = 1;\n              return this.shopifyClient.executeQuery(query, variables);\n            case 1:\n              return _context8.a(2);\n          }\n        }, _callee8, this);\n      }));\n      function removeLineItem(_x7) {\n        return _removeLineItem.apply(this, arguments);\n      }\n      return removeLineItem;\n    }()\n    /**\n     * Refreshes the cart state from Shopify and updates cache.\n     * @returns {Promise<void>}\n     */\n    )\n  }, {\n    key: \"refreshCart\",\n    value: (function () {\n      var _refreshCart = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9() {\n        return _regenerator().w(function (_context9) {\n          while (1) switch (_context9.n) {\n            case 0:\n              _context9.n = 1;\n              return this.fetchCart(this.cartId);\n            case 1:\n              this._cart = _context9.v;\n              _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.set(this._cartStorageKey, this._cart, this._cartCacheTTL);\n              this.cartId = this._cart.id;\n              console.info(\"[Blink] Cart refreshed:\", this._cart);\n              if (typeof this.onCartChange === \"function\") {\n                this.onCartChange(this._cart);\n              }\n            case 2:\n              return _context9.a(2);\n          }\n        }, _callee9, this);\n      }));\n      function refreshCart() {\n        return _refreshCart.apply(this, arguments);\n      }\n      return refreshCart;\n    }())\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/Cart.js?");

/***/ }),

/***/ "./src/lib/GlobalBlink.js":
/*!********************************!*\
  !*** ./src/lib/GlobalBlink.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalBlink: () => (/* binding */ GlobalBlink)\n/* harmony export */ });\n/* harmony import */ var _ShopifyClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ShopifyClient.js */ \"./src/lib/ShopifyClient.js\");\n/* harmony import */ var _ProductManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ProductManager.js */ \"./src/lib/ProductManager.js\");\n/* harmony import */ var _Cart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Cart.js */ \"./src/lib/Cart.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ \"./src/lib/utils.js\");\n/* harmony import */ var _ui_CartUI_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui/CartUI.js */ \"./src/lib/ui/CartUI.js\");\n/* harmony import */ var _ui_ProductUI_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui/ProductUI.js */ \"./src/lib/ui/ProductUI.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n/**\n * Main entry point for Blink, initializes all modules and state.\n */\nvar GlobalBlink = /*#__PURE__*/function () {\n  /**\n   * @param {object} [config={}] - Optional configuration object.\n   */\n  function GlobalBlink() {\n    var _config$shopify,\n      _config$shopify2,\n      _this = this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, GlobalBlink);\n    if (GlobalBlink._instance) return GlobalBlink._instance;\n    GlobalBlink._instance = this;\n    var token = ((_config$shopify = config.shopify) === null || _config$shopify === void 0 ? void 0 : _config$shopify.token) || this._getTokenFromDOM();\n    var storeDomain = ((_config$shopify2 = config.shopify) === null || _config$shopify2 === void 0 ? void 0 : _config$shopify2.storeDomain) || this._getStoreDomainFromDOM();\n    if (!token || !storeDomain) {\n      console.error(\"[Blink] Shopify Token or Store Domain not provided or found in DOM.\");\n      return;\n    }\n    this.shopifyClient = new _ShopifyClient_js__WEBPACK_IMPORTED_MODULE_0__.ShopifyClient({\n      token: token,\n      storeDomain: storeDomain\n    });\n    this.productManager = new _ProductManager_js__WEBPACK_IMPORTED_MODULE_1__.ProductManager(this.shopifyClient);\n    this.cart = new _Cart_js__WEBPACK_IMPORTED_MODULE_2__.Cart(this.shopifyClient, this.productManager);\n    this.cartUI = new _ui_CartUI_js__WEBPACK_IMPORTED_MODULE_4__.CartUI(this.cart);\n\n    // Add ProductUI\n    this.productUI = new _ui_ProductUI_js__WEBPACK_IMPORTED_MODULE_5__.ProductUI(this.productManager, this.cart, this.cartUI, function () {\n      return _this.cart._moneyFormat;\n    } // pass getter for moneyFormat\n    );\n\n    // Store info about the shop (shopName, moneyFormat)\n    this.store = {\n      shopName: null,\n      moneyFormat: null\n    };\n    this._init();\n  }\n\n  /**\n   * Initializes all modules and fetches shop info.\n   * @private\n   * @returns {Promise<void>}\n   */\n  return _createClass(GlobalBlink, [{\n    key: \"_init\",\n    value: (function () {\n      var _init2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var cached, info, _res$data, query, res;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return this.cart.init();\n            case 1:\n              _context.n = 2;\n              return this.cartUI.init();\n            case 2:\n              _context.n = 3;\n              return this.productUI.init();\n            case 3:\n              // Load shop info from localStorage if available\n              cached = _utils_js__WEBPACK_IMPORTED_MODULE_3__.Cache.get(\"blink_shop_info\");\n              if (cached) {\n                try {\n                  info = cached;\n                  this.store.shopName = info.shopName || null;\n                  this.store.moneyFormat = info.moneyFormat || null;\n                } catch (e) {\n                  console.warn(\"[Blink] Invalid cached shop info, fetching fresh.\");\n                }\n              }\n              // If not cached, fetch from Shopify\n              if (!(!this.store.shopName || !this.store.moneyFormat)) {\n                _context.n = 5;\n                break;\n              }\n              query = \"\\n            {\\n                shop {\\n                    name\\n                    moneyFormat\\n                }\\n            }\\n            \";\n              _context.n = 4;\n              return this.shopifyClient.executeQuery(query);\n            case 4:\n              res = _context.v;\n              if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.shop) {\n                this.store.shopName = res.data.shop.name;\n                this.store.moneyFormat = res.data.shop.moneyFormat;\n                _utils_js__WEBPACK_IMPORTED_MODULE_3__.Cache.set(\"blink_shop_info\", {\n                  shopName: this.store.shopName,\n                  moneyFormat: this.store.moneyFormat\n                }, 1000 * 60 * 60 // 1 hour TTL for shop info\n                );\n              }\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, this);\n      }));\n      function _init() {\n        return _init2.apply(this, arguments);\n      }\n      return _init;\n    }()\n    /**\n     * Gets the Shopify token from the DOM.\n     * @private\n     * @returns {string|null}\n     */\n    )\n  }, {\n    key: \"_getTokenFromDOM\",\n    value: function _getTokenFromDOM() {\n      var _el$getAttribute;\n      var el = document.querySelector('script[data-name=\"blink-main-script\"]');\n      return (_el$getAttribute = el === null || el === void 0 ? void 0 : el.getAttribute(\"data-store-token\")) !== null && _el$getAttribute !== void 0 ? _el$getAttribute : null;\n    }\n\n    /**\n     * Gets the Shopify store domain from the DOM.\n     * @private\n     * @returns {string|null}\n     */\n  }, {\n    key: \"_getStoreDomainFromDOM\",\n    value: function _getStoreDomainFromDOM() {\n      var _el$getAttribute2;\n      var el = document.querySelector('script[data-name=\"blink-main-script\"]');\n      return (_el$getAttribute2 = el === null || el === void 0 ? void 0 : el.getAttribute(\"data-store-domain\")) !== null && _el$getAttribute2 !== void 0 ? _el$getAttribute2 : null;\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/GlobalBlink.js?");

/***/ }),

/***/ "./src/lib/ProductManager.js":
/*!***********************************!*\
  !*** ./src/lib/ProductManager.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProductManager: () => (/* binding */ ProductManager)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/lib/utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * Manages product data fetching and caching.\n */\nvar ProductManager = /*#__PURE__*/function () {\n  /**\n   * @param {object} shopifyClient - Shopify client instance.\n   */\n  function ProductManager(shopifyClient) {\n    _classCallCheck(this, ProductManager);\n    this.shopifyClient = shopifyClient;\n    this.currentProducts = {};\n    this._productCacheKey = \"blink_products\";\n    this._productCacheTTL = 1000 * 60 * 10; // 10 minutes\n  }\n\n  /**\n   * Fetches all products on the page or by given IDs.\n   * @param {string[]|null} [productIds=null] - Optional array of product IDs.\n   * @returns {Promise<void>}\n   */\n  return _createClass(ProductManager, [{\n    key: \"fetchAllProductsOnPage\",\n    value: (function () {\n      var _fetchAllProductsOnPage = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _this = this;\n        var productIds,\n          ids,\n          uniqueIds,\n          cached,\n          idsToFetch,\n          _iterator,\n          _step,\n          id,\n          _args2 = arguments;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              productIds = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : null;\n              // Accepts optional productIds for UI to control which products to fetch\n              ids = productIds || Array.from(document.querySelectorAll(\"[data-bf-product-id]\")).map(function (el) {\n                return el.getAttribute(\"data-bf-product-id\");\n              }).filter(Boolean);\n              uniqueIds = _toConsumableArray(new Set(ids)); // Try to load from cache\n              cached = _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.get(this._productCacheKey) || {};\n              idsToFetch = uniqueIds.filter(function (id) {\n                return !cached[id];\n              }); // Use cached products\n              _iterator = _createForOfIteratorHelper(uniqueIds);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  id = _step.value;\n                  if (cached[id]) {\n                    this.currentProducts[id] = cached[id];\n                  }\n                }\n                // Fetch missing/expired products\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              _context2.n = 1;\n              return Promise.all(idsToFetch.map(/*#__PURE__*/function () {\n                var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(id) {\n                  var product, _t;\n                  return _regenerator().w(function (_context) {\n                    while (1) switch (_context.n) {\n                      case 0:\n                        _context.p = 0;\n                        _context.n = 1;\n                        return _this.fetchAndStoreProduct(id);\n                      case 1:\n                        product = _context.v;\n                        if (product) {\n                          _this.currentProducts[id] = product;\n                        }\n                        _context.n = 3;\n                        break;\n                      case 2:\n                        _context.p = 2;\n                        _t = _context.v;\n                        console.error(\"[Blink] Failed to fetch product \".concat(id, \":\"), _t);\n                      case 3:\n                        return _context.a(2);\n                    }\n                  }, _callee, null, [[0, 2]]);\n                }));\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }()));\n            case 1:\n              _utils_js__WEBPACK_IMPORTED_MODULE_0__.Cache.set(this._productCacheKey, _objectSpread(_objectSpread({}, cached), this.currentProducts), this._productCacheTTL);\n            case 2:\n              return _context2.a(2);\n          }\n        }, _callee2, this);\n      }));\n      function fetchAllProductsOnPage() {\n        return _fetchAllProductsOnPage.apply(this, arguments);\n      }\n      return fetchAllProductsOnPage;\n    }()\n    /**\n     * Fetches a product by ID from Shopify and stores it.\n     * @param {string} productId\n     * @returns {Promise<object|null>} The product object or null.\n     */\n    )\n  }, {\n    key: \"fetchAndStoreProduct\",\n    value: (function () {\n      var _fetchAndStoreProduct = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(productId) {\n        var query, res;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              query = \"\\n        query Products($id: ID!) @inContext(language: EN) {\\n          node(id: $id) {\\n            ... on Product {\\n              id\\n              title\\n              handle\\n              description\\n              descriptionHtml\\n              priceRange {\\n                minVariantPrice { amount currencyCode }\\n                maxVariantPrice { amount currencyCode }\\n              }\\n              compareAtPriceRange {\\n                minVariantPrice { amount currencyCode }\\n                maxVariantPrice { amount currencyCode }\\n              }\\n              options {\\n                name\\n                optionValues {\\n                  id\\n                  name\\n                  swatch {\\n                    color\\n                    image {\\n                      id\\n                      alt\\n                      previewImage {\\n                        altText\\n                        url\\n                      }\\n                    }\\n                  }\\n                }\\n              }\\n              images(first: 100) {\\n                edges {\\n                  node {\\n                    src\\n                    altText\\n                    id\\n                    width\\n                    height\\n                  }\\n                }\\n              }\\n              collections(first: 250) {\\n                edges {\\n                  node {\\n                    id\\n                    title\\n                    metafields(identifiers: []) {\\n                      id\\n                      namespace\\n                      key\\n                      value\\n                      reference {\\n                        __typename\\n                        ... on MediaImage {\\n                          alt\\n                          image { url }\\n                        }\\n                      }\\n                      type\\n                      description\\n                    }\\n                    handle\\n                    description\\n                    descriptionHtml\\n                    image { src }\\n                  }\\n                }\\n              }\\n              vendor\\n              productType\\n              tags\\n              requiresSellingPlan\\n              variants(first: 100) {\\n                edges {\\n                  node {\\n                    id\\n                    product { id title vendor }\\n                    title\\n                    sku\\n                    barcode\\n                    price { amount currencyCode }\\n                    unitPrice { amount currencyCode }\\n                    compareAtPrice { amount currencyCode }\\n                    image { src altText id width height }\\n                    selectedOptions { name value }\\n                    availableForSale\\n                    currentlyNotInStock\\n                    quantityAvailable\\n                    product { id title vendor }\\n                    metafields(identifiers: []) {\\n                      id\\n                      namespace\\n                      key\\n                      value\\n                      reference {\\n                        __typename\\n                        ... on MediaImage {\\n                          alt\\n                          image { url }\\n                        }\\n                      }\\n                      type\\n                      description\\n                    }\\n                    weight\\n                    weightUnit\\n                    sellingPlanAllocations(first: 10) {\\n                      edges {\\n                        node {\\n                          sellingPlan {\\n                            id\\n                            name\\n                            description\\n                            checkoutCharge { type value }\\n                            recurringDeliveries\\n                            options { name value }\\n                          }\\n                          priceAdjustments {\\n                            price { amount currencyCode }\\n                            compareAtPrice { amount currencyCode }\\n                            perDeliveryPrice { amount currencyCode }\\n                            unitPrice { amount currencyCode }\\n                          }\\n                        }\\n                      }\\n                    }\\n                  }\\n                }\\n              }\\n              sellingPlanGroups(first: 10) {\\n                edges {\\n                  node {\\n                    appName\\n                    name\\n                    sellingPlans(first: 10) {\\n                      edges {\\n                        node {\\n                          id\\n                          name\\n                          description\\n                          recurringDeliveries\\n                          options { name value }\\n                          priceAdjustments {\\n                            orderCount\\n                            adjustmentValue {\\n                              __typename\\n                              ... on SellingPlanPercentagePriceAdjustment {\\n                                adjustmentPercentage\\n                              }\\n                              ... on SellingPlanFixedAmountPriceAdjustment {\\n                                adjustmentAmount { amount currencyCode }\\n                              }\\n                              ... on SellingPlanFixedPriceAdjustment {\\n                                price { amount currencyCode }\\n                              }\\n                            }\\n                          }\\n                        }\\n                      }\\n                    }\\n                  }\\n                }\\n              }\\n            }\\n          }\\n        }\\n        \";\n              _context3.n = 1;\n              return this.shopifyClient.executeQuery(query, {\n                id: productId\n              });\n            case 1:\n              res = _context3.v;\n              if (!(res && res.data && res.data.node)) {\n                _context3.n = 2;\n                break;\n              }\n              return _context3.a(2, res.data.node);\n            case 2:\n              return _context3.a(2, null);\n          }\n        }, _callee3, this);\n      }));\n      function fetchAndStoreProduct(_x2) {\n        return _fetchAndStoreProduct.apply(this, arguments);\n      }\n      return fetchAndStoreProduct;\n    }())\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/ProductManager.js?");

/***/ }),

/***/ "./src/lib/ShopifyClient.js":
/*!**********************************!*\
  !*** ./src/lib/ShopifyClient.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShopifyClient: () => (/* binding */ ShopifyClient)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Handles communication with the Shopify Storefront API.\n */\nvar ShopifyClient = /*#__PURE__*/function () {\n  /**\n   * @param {object} params\n   * @param {string} params.token - Storefront access token.\n   * @param {string} params.storeDomain - Shopify store domain.\n   */\n  function ShopifyClient(_ref) {\n    var token = _ref.token,\n      storeDomain = _ref.storeDomain;\n    _classCallCheck(this, ShopifyClient);\n    this.token = token;\n    this.storeDomain = storeDomain;\n  }\n\n  /**\n   * Executes a GraphQL query against the Shopify Storefront API.\n   * @param {string} query - GraphQL query string.\n   * @param {object} [variables={}] - Query variables.\n   * @returns {Promise<object>} The API response.\n   */\n  return _createClass(ShopifyClient, [{\n    key: \"executeQuery\",\n    value: (function () {\n      var _executeQuery = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(query) {\n        var variables,\n          url,\n          response,\n          errorData,\n          _args = arguments,\n          _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              variables = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n              if (!(!this.token || !this.storeDomain)) {\n                _context.n = 1;\n                break;\n              }\n              console.error(\"[Blink] Shopify instance is not initialized.\");\n              return _context.a(2);\n            case 1:\n              url = \"https://\".concat(this.storeDomain, \"/api/2025-04/graphql.json\");\n              _context.p = 2;\n              _context.n = 3;\n              return fetch(url, {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"X-Shopify-Storefront-Access-Token\": this.token\n                },\n                body: JSON.stringify({\n                  query: query,\n                  variables: variables\n                })\n              });\n            case 3:\n              response = _context.v;\n              if (response.ok) {\n                _context.n = 5;\n                break;\n              }\n              _context.n = 4;\n              return response.json();\n            case 4:\n              errorData = _context.v;\n              console.error(\"Shopify API Error:\", errorData);\n              throw new Error(\"Shopify GraphQL error: \".concat(response.status));\n            case 5:\n              _context.n = 6;\n              return response.json();\n            case 6:\n              return _context.a(2, _context.v);\n            case 7:\n              _context.p = 7;\n              _t = _context.v;\n              console.error(\"Shopify API Error:\", _t.message);\n              throw _t;\n            case 8:\n              return _context.a(2);\n          }\n        }, _callee, this, [[2, 7]]);\n      }));\n      function executeQuery(_x) {\n        return _executeQuery.apply(this, arguments);\n      }\n      return executeQuery;\n    }())\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/ShopifyClient.js?");

/***/ }),

/***/ "./src/lib/ui/CartUI.js":
/*!******************************!*\
  !*** ./src/lib/ui/CartUI.js ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CartUI: () => (/* binding */ CartUI)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./src/lib/utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * Handles rendering and UI interactions for the cart.\n */\nvar CartUI = /*#__PURE__*/function () {\n  /**\n   * @param {object} cart - Cart instance.\n   */\n  function CartUI(cart) {\n    var _this = this;\n    _classCallCheck(this, CartUI);\n    this.cart = cart;\n    this._templates = {};\n    // Subscribe to cart changes\n    this.cart.onCartChange = function () {\n      return _this.renderCart();\n    };\n  }\n\n  /**\n   * Initializes cart UI, sets up event listeners.\n   * @returns {Promise<void>}\n   */\n  return _createClass(CartUI, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              this.closeCartDrawer();\n              this._setupCartTriggerButtons();\n              this._setupCheckoutButtons();\n              this._setupClearCartButtons();\n              this.renderCart();\n            case 1:\n              return _context.a(2);\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * Renders the cart contents in the UI.\n     */\n    )\n  }, {\n    key: \"renderCart\",\n    value: function renderCart() {\n      var _this2 = this;\n      var cartData = this.cart._cart;\n      document.querySelectorAll(\"[data-bf-cart]\").forEach(function (cart) {\n        var cartItemsCountElem = cart.querySelector(\"[data-bf-cart-items-count]\");\n        var cartItemsCount = 0;\n        var container = cart.querySelector(\"[data-bf-line-items]\");\n        if (!container) return;\n        var template = _this2._templates.cartTemplate;\n        if (!template) {\n          template = container.querySelector(\"[data-bf-line-item]\");\n          if (!template) return;\n          _this2._templates.cartTemplate = template.cloneNode(true);\n        }\n        template.style.display = \"none\";\n        var emptyMessage = cart.querySelector(\"[data-bf-empty-cart-message]\");\n        if (emptyMessage) emptyMessage.style.display = \"none\";\n        container.querySelectorAll(\"[data-bf-line-item]\").forEach(function (el) {\n          if (el !== template) el.remove();\n        });\n        var subTotalElem = cart.querySelector(\"[data-bf-cart-subtotal]\");\n        var totalElem = cart.querySelector(\"[data-bf-cart-total]\");\n        _this2.updateCartTotals(subTotalElem, totalElem, cartData);\n        if (!cartData || !cartData.lines || !cartData.lines.edges.length) {\n          template.style.display = \"none\";\n          if (emptyMessage) emptyMessage.style.display = \"\";\n          return;\n        }\n        cartData.lines.edges.forEach(function (edge) {\n          cartItemsCount += edge.node.quantity;\n          var line = edge.node;\n          var itemEl = template.cloneNode(true);\n          container.appendChild(itemEl);\n          itemEl.style.display = \"\";\n          var img = itemEl.querySelector(\"[data-bf-line-image]\");\n          if (img) {\n            var _line$merchandise$ima, _line$merchandise$ima2;\n            img.src = (_line$merchandise$ima = line.merchandise.image) === null || _line$merchandise$ima === void 0 ? void 0 : _line$merchandise$ima.url;\n            img.alt = ((_line$merchandise$ima2 = line.merchandise.image) === null || _line$merchandise$ima2 === void 0 ? void 0 : _line$merchandise$ima2.altText) || \"\";\n          }\n          var titleEl = itemEl.querySelector(\"[data-bf-line-title]\");\n          if (titleEl) titleEl.textContent = line.merchandise.product.title;\n          var optionEl = itemEl.querySelector(\"[data-bf-line-selected-option]\");\n          if (optionEl) optionEl.textContent = line.merchandise.title;\n          var qtyEl = itemEl.querySelector(\"[data-bf-line-qty]\");\n          if (qtyEl) qtyEl.textContent = line.quantity;\n          var perQtyEl = itemEl.querySelector(\"[data-bf-line-amount-per-qty]\");\n          if (perQtyEl && line.cost && line.cost.amountPerQuantity) {\n            perQtyEl.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(line.cost.amountPerQuantity.amount, line.cost.amountPerQuantity.currencyCode, _this2.cart._moneyFormat);\n          }\n          var totalEl = itemEl.querySelector(\"[data-bf-line-total-amount]\");\n          if (totalEl && line.cost && line.cost.totalAmount) {\n            totalEl.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(line.cost.totalAmount.amount, line.cost.totalAmount.currencyCode, _this2.cart._moneyFormat);\n          }\n          var removeBtn = itemEl.querySelector(\"[data-bf-remove-line-item]\");\n          if (removeBtn) {\n            removeBtn.onclick = /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(e) {\n                return _regenerator().w(function (_context2) {\n                  while (1) switch (_context2.n) {\n                    case 0:\n                      e.preventDefault();\n                      _context2.n = 1;\n                      return _this2.cart.removeLineItem(line.id);\n                    case 1:\n                      _context2.n = 2;\n                      return _this2.cart.refreshCart();\n                    case 2:\n                      _this2.renderCart();\n                    case 3:\n                      return _context2.a(2);\n                  }\n                }, _callee2);\n              }));\n              return function (_x) {\n                return _ref.apply(this, arguments);\n              };\n            }();\n          }\n        });\n        if (cartItemsCountElem) {\n          cartItemsCountElem.textContent = \"(\".concat(cartItemsCount, \")\");\n          if (cartItemsCount > 0) {\n            cartItemsCountElem.style.display = \"\";\n          } else {\n            cartItemsCountElem.style.display = \"none\";\n          }\n        }\n        if (cartData.lines.edges.length > 1) template.style.display = \"\";\n      });\n    }\n\n    /**\n     * Updates cart subtotal and total elements.\n     * @param {HTMLElement} subTotalElem\n     * @param {HTMLElement} totalElem\n     * @param {object} cartData\n     */\n  }, {\n    key: \"updateCartTotals\",\n    value: function updateCartTotals(subTotalElem, totalElem, cartData) {\n      var _cartData$estimatedCo, _cartData$estimatedCo2, _cartData$estimatedCo3, _cartData$estimatedCo4;\n      if (!cartData || !(cartData !== null && cartData !== void 0 && cartData.estimatedCost)) {\n        if (subTotalElem) subTotalElem.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(0, \"USD\");\n        if (totalElem) totalElem.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(0, \"USD\");\n        return;\n      }\n      var subtotal = (cartData === null || cartData === void 0 || (_cartData$estimatedCo = cartData.estimatedCost) === null || _cartData$estimatedCo === void 0 || (_cartData$estimatedCo = _cartData$estimatedCo.subtotalAmount) === null || _cartData$estimatedCo === void 0 ? void 0 : _cartData$estimatedCo.amount) || 0;\n      var subtotalCurrency = (cartData === null || cartData === void 0 || (_cartData$estimatedCo2 = cartData.estimatedCost) === null || _cartData$estimatedCo2 === void 0 || (_cartData$estimatedCo2 = _cartData$estimatedCo2.subtotalAmount) === null || _cartData$estimatedCo2 === void 0 ? void 0 : _cartData$estimatedCo2.currencyCode) || \"USD\";\n      var total = (cartData === null || cartData === void 0 || (_cartData$estimatedCo3 = cartData.estimatedCost) === null || _cartData$estimatedCo3 === void 0 || (_cartData$estimatedCo3 = _cartData$estimatedCo3.totalAmount) === null || _cartData$estimatedCo3 === void 0 ? void 0 : _cartData$estimatedCo3.amount) || 0;\n      var totalCurrency = (cartData === null || cartData === void 0 || (_cartData$estimatedCo4 = cartData.estimatedCost) === null || _cartData$estimatedCo4 === void 0 || (_cartData$estimatedCo4 = _cartData$estimatedCo4.totalAmount) === null || _cartData$estimatedCo4 === void 0 ? void 0 : _cartData$estimatedCo4.currencyCode) || \"USD\";\n      if (subTotalElem) {\n        subTotalElem.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(subtotal, subtotalCurrency, this.cart._moneyFormat);\n      }\n      if (totalElem) {\n        totalElem.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(total, totalCurrency, this.cart._moneyFormat);\n      }\n    }\n\n    /**\n     * Sets up buttons that open/close the cart drawer.\n     * @private\n     */\n  }, {\n    key: \"_setupCartTriggerButtons\",\n    value: function _setupCartTriggerButtons() {\n      var _this3 = this;\n      var cartOpenButtons = document.querySelectorAll(\"[data-bf-cart-drawer-open]\");\n      var cartCloseButtons = document.querySelectorAll(\"[data-bf-cart-drawer-close]\");\n      cartOpenButtons.forEach(function (button) {\n        button.addEventListener(\"click\", function () {\n          return _this3.openCartDrawer();\n        });\n      });\n      cartCloseButtons.forEach(function (button) {\n        button.addEventListener(\"click\", function () {\n          return _this3.closeCartDrawer();\n        });\n      });\n    }\n\n    /**\n     * Closes the cart drawer.\n     * @param {HTMLElement} [cartDrawer]\n     * @private\n     */\n  }, {\n    key: \"closeCartDrawer\",\n    value: function closeCartDrawer(cartDrawer) {\n      var drawer = cartDrawer ? cartDrawer : document.querySelector(\"[data-bf-cart-drawer]\");\n      if (drawer) {\n        drawer.classList.remove(\"open\");\n        drawer.setAttribute(\"aria-hidden\", \"true\");\n      }\n    }\n\n    /**\n     * Opens the cart drawer.\n     * @param {HTMLElement} [cartDrawer]\n     * @private\n     */\n  }, {\n    key: \"openCartDrawer\",\n    value: function openCartDrawer(cartDrawer) {\n      var drawer = cartDrawer ? cartDrawer : document.querySelector(\"[data-bf-cart-drawer]\");\n      if (drawer) {\n        drawer.classList.add(\"open\");\n        drawer.setAttribute(\"aria-hidden\", \"false\");\n      }\n    }\n\n    /**\n     * Sets up checkout buttons to redirect to checkout URL.\n     * @private\n     */\n  }, {\n    key: \"_setupCheckoutButtons\",\n    value: function _setupCheckoutButtons() {\n      var _this4 = this;\n      var checkoutButtons = document.querySelectorAll(\"[data-bf-checkout]\");\n      checkoutButtons.forEach(function (button) {\n        button.addEventListener(\"click\", function (e) {\n          e.preventDefault();\n          if (_this4.cart._cart && _this4.cart._cart.checkoutUrl) {\n            window.location.href = _this4.cart._cart.checkoutUrl;\n          } else {\n            console.warn(\"[Blink] No checkoutUrl available on cart.\");\n          }\n        });\n      });\n    }\n\n    /**\n     * Sets up clear cart buttons to empty the cart.\n     * @private\n     */\n  }, {\n    key: \"_setupClearCartButtons\",\n    value: function _setupClearCartButtons() {\n      var _this5 = this;\n      var clearButtons = document.querySelectorAll(\"[data-bf-clear-cart]\");\n      clearButtons.forEach(function (button) {\n        button.addEventListener(\"click\", /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(e) {\n            return _regenerator().w(function (_context3) {\n              while (1) switch (_context3.n) {\n                case 0:\n                  e.preventDefault();\n                  _context3.n = 1;\n                  return _this5.cart.clearCart();\n                case 1:\n                  _context3.n = 2;\n                  return _this5.cart.refreshCart();\n                case 2:\n                  _this5.renderCart();\n                case 3:\n                  return _context3.a(2);\n              }\n            }, _callee3);\n          }));\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      });\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/ui/CartUI.js?");

/***/ }),

/***/ "./src/lib/ui/ProductUI.js":
/*!*********************************!*\
  !*** ./src/lib/ui/ProductUI.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProductUI: () => (/* binding */ ProductUI)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./src/lib/utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\n * Handles rendering and UI interactions for products.\n */\nvar ProductUI = /*#__PURE__*/function () {\n  /**\n   * @param {object} productManager - ProductManager instance.\n   * @param {object} cart - Cart instance.\n   * @param {object} cartUI - CartUI instance.\n   * @param {function} moneyFormatGetter - Function returning money format string.\n   */\n  function ProductUI(productManager, cart, cartUI, moneyFormatGetter) {\n    _classCallCheck(this, ProductUI);\n    this.productManager = productManager;\n    this.cart = cart;\n    this.cartUI = cartUI;\n    this.getMoneyFormat = moneyFormatGetter; // function to get moneyFormat\n    this._loaderSVG = \"\\n        <svg class=\\\"bf-loader-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\">\\n        <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"10\\\" stroke-opacity=\\\"0.2\\\"/>\\n        <path d=\\\"M22 12a10 10 0 0 1-10 10\\\" />\\n        <style>\\n            .bf-loader-svg { animation: bf-rotate 1s linear infinite; vertical-align: middle;}\\n            @keyframes bf-rotate { 100% { transform: rotate(360deg); } }\\n        </style>\\n        </svg>\\n        \";\n    this._checkSVG = \"\\n        <svg class=\\\"bf-check-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"#22c55e\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\">\\n        <path d=\\\"M20 6 9 17l-5-5\\\"/>\\n        </svg>\\n        \";\n    this.templates = {}; // Will be filled at runtime from DOM\n  }\n\n  /**\n   * Initializes product UI, fetches products, renders prices, sets up buttons, and renders galleries.\n   * @returns {Promise<void>}\n   */\n  return _createClass(ProductUI, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return this.productManager.fetchAllProductsOnPage();\n            case 1:\n              this.renderProductDetails();\n              this.setupAddToCartButtons();\n              this.renderProductGalleries();\n            case 2:\n              return _context.a(2);\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * Renders product image galleries, thumbnails, and slider controls.\n     * Fetches templates from DOM.\n     */\n    )\n  }, {\n    key: \"renderProductGalleries\",\n    value: function renderProductGalleries() {\n      var _this = this;\n      document.querySelectorAll(\"[data-bf-product-gallery]\").forEach(function (galleryEl) {\n        var productEl = galleryEl.closest(\"[data-bf-product-id]\");\n        if (!productEl) return;\n        var productId = productEl.getAttribute(\"data-bf-product-id\");\n        var product = _this.productManager.currentProducts[productId];\n        if (!product || !product.images) return;\n        var images = product.images.edges.map(function (edge) {\n          return edge.node;\n        });\n        var activeIndex = 0;\n\n        // Get slider and thumbnails wrapper\n        var sliderEl = galleryEl.querySelector(\"[data-bf-product-image-slider]\");\n        var thumbnailsWrapper = galleryEl.querySelector(\"[data-bf-thumbnail-wrapper]\");\n        if (!sliderEl || !thumbnailsWrapper) return;\n\n        // Fetch templates from DOM if not already\n        if (!_this.templates.activeImage) {\n          var activeImageTemplate = sliderEl.querySelector(\"[data-bf-product-image]\");\n          if (activeImageTemplate) {\n            _this.templates.activeImage = activeImageTemplate.cloneNode(true);\n            _this.templates.activeImage.style.display = \"none\";\n          }\n        }\n        if (!_this.templates.thumbnailImage) {\n          var thumbTemplate = thumbnailsWrapper.querySelector(\"[data-bf-thumbnail-image]\");\n          if (thumbTemplate) {\n            _this.templates.thumbnailImage = thumbTemplate.cloneNode(true);\n            _this.templates.thumbnailImage.style.display = \"none\";\n          }\n        }\n\n        // Remove all but template in slider and thumbnails\n        sliderEl.querySelectorAll(\"[data-bf-product-image]\").forEach(function (el) {\n          if (_this.templates.activeImage && el !== _this.templates.activeImage) el.remove();\n        });\n        thumbnailsWrapper.querySelectorAll(\"[data-bf-thumbnail-image]\").forEach(function (el) {\n          if (_this.templates.thumbnailImage && el !== _this.templates.thumbnailImage) el.remove();\n        });\n\n        // Render all images in slider ONCE\n        var sliderImages = [];\n        images.forEach(function (img, idx) {\n          var imgEl = _this.templates.activeImage ? _this.templates.activeImage.cloneNode(true) : document.createElement(\"img\");\n          imgEl.setAttribute(\"data-bf-product-image\", \"\");\n          imgEl.src = img.src;\n          imgEl.alt = img.altText || product.title || \"\";\n          imgEl.style.display = idx === activeIndex ? \"\" : \"none\";\n          imgEl.classList.toggle(\"active\", idx === activeIndex);\n          sliderEl.appendChild(imgEl);\n          sliderImages.push(imgEl);\n        });\n\n        // Render all thumbnails ONCE\n        var thumbnailImages = [];\n        images.forEach(function (img, idx) {\n          var thumbEl = _this.templates.thumbnailImage ? _this.templates.thumbnailImage.cloneNode(true) : document.createElement(\"img\");\n          thumbEl.setAttribute(\"data-bf-thumbnail-image\", \"\");\n          thumbEl.src = img.src;\n          thumbEl.alt = img.altText || product.title || \"\";\n          thumbEl.setAttribute(\"data-index\", idx);\n          thumbEl.style.display = \"\";\n          thumbEl.classList.toggle(\"active\", idx === activeIndex);\n          thumbEl.onclick = function () {\n            setActiveIndex(idx);\n          };\n          thumbnailsWrapper.appendChild(thumbEl);\n          thumbnailImages.push(thumbEl);\n        });\n\n        // Function to update active image and thumbnail\n        function setActiveIndex(idx) {\n          activeIndex = idx;\n          sliderImages.forEach(function (imgEl, i) {\n            imgEl.style.display = i === activeIndex ? \"\" : \"none\";\n            imgEl.classList.toggle(\"active\", i === activeIndex);\n          });\n          thumbnailImages.forEach(function (thumbEl, i) {\n            thumbEl.classList.toggle(\"active\", i === activeIndex);\n          });\n        }\n\n        // Setup arrow navigation using DOM elements\n        var arrowLeft = sliderEl.querySelector(\"[data-bf-image-slider-arrow-left]\");\n        var arrowRight = sliderEl.querySelector(\"[data-bf-image-slider-arrow-right]\");\n        if (arrowLeft) {\n          arrowLeft.onclick = function () {\n            setActiveIndex((activeIndex - 1 + images.length) % images.length);\n          };\n        }\n        if (arrowRight) {\n          arrowRight.onclick = function () {\n            setActiveIndex((activeIndex + 1) % images.length);\n          };\n        }\n      });\n    }\n\n    /**\n     * Renders product details: title, description, prices, and compare-at prices on the page.\n     */\n  }, {\n    key: \"renderProductDetails\",\n    value: function renderProductDetails() {\n      var _this2 = this;\n      document.querySelectorAll(\"[data-bf-product-id]\").forEach(function (productEl) {\n        var _product$variants;\n        var productId = productEl.getAttribute(\"data-bf-product-id\");\n        var product = _this2.productManager.currentProducts[productId];\n        if (!product) return;\n\n        // Render product title\n        var titleEl = productEl.querySelector(\"[data-bf-product-title]\");\n        if (titleEl && product.title) {\n          titleEl.textContent = product.title;\n        }\n\n        // Render product description\n        var descEl = productEl.querySelector(\"[data-bf-product-description]\");\n        if (descEl && product.description) {\n          descEl.textContent = product.description;\n        }\n\n        // Get first variant\n        var variant = (_product$variants = product.variants) === null || _product$variants === void 0 || (_product$variants = _product$variants.edges) === null || _product$variants === void 0 || (_product$variants = _product$variants[0]) === null || _product$variants === void 0 ? void 0 : _product$variants.node;\n        if (!variant) return;\n\n        // Render price\n        var priceEl = productEl.querySelector(\"[data-bf-product-price]\");\n        if (priceEl && variant.price) {\n          priceEl.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(variant.price.amount, variant.price.currencyCode, _this2.getMoneyFormat());\n        }\n\n        // Render compare at price\n        var compareAtEl = productEl.querySelector(\"[data-bf-product-compare-at-price]\");\n        if (compareAtEl && variant.compareAtPrice && variant.compareAtPrice.amount) {\n          compareAtEl.textContent = _utils_js__WEBPACK_IMPORTED_MODULE_0__.MoneyFormatter.format(variant.compareAtPrice.amount, variant.compareAtPrice.currencyCode, _this2.getMoneyFormat());\n          compareAtEl.style.display = \"\";\n        } else if (compareAtEl) {\n          compareAtEl.style.display = \"none\";\n        }\n      });\n    }\n\n    /**\n     * Sets up add-to-cart buttons for all products.\n     */\n  }, {\n    key: \"setupAddToCartButtons\",\n    value: function setupAddToCartButtons() {\n      var _this3 = this;\n      var buttons = document.querySelectorAll(\"[data-bf-add-to-cart]\");\n      buttons.forEach(function (button) {\n        var productEl = button.closest(\"[data-bf-product-id]\");\n        if (productEl) {\n          var _product$variants2;\n          var productId = productEl.getAttribute(\"data-bf-product-id\");\n          var product = _this3.productManager.currentProducts[productId];\n          var variant = product === null || product === void 0 || (_product$variants2 = product.variants) === null || _product$variants2 === void 0 || (_product$variants2 = _product$variants2.edges) === null || _product$variants2 === void 0 || (_product$variants2 = _product$variants2[0]) === null || _product$variants2 === void 0 ? void 0 : _product$variants2.node;\n          if (!variant || !variant.availableForSale) {\n            button.disabled = true;\n            button.innerHTML = \"Out of stock\";\n          }\n        }\n        button.addEventListener(\"click\", function (e) {\n          e.preventDefault();\n          _this3.handleAddToCart(button);\n        });\n      });\n    }\n\n    /**\n     * Handles add-to-cart button click.\n     * @param {HTMLElement} button\n     */\n  }, {\n    key: \"handleAddToCart\",\n    value: function handleAddToCart(button) {\n      var _product$variants3,\n        _this4 = this;\n      var productEl = button.closest(\"[data-bf-product-id]\");\n      var quantityEl = productEl === null || productEl === void 0 ? void 0 : productEl.querySelector(\"[data-bf-qty]\");\n      var quantity = quantityEl ? parseInt(quantityEl.value, 10) : 1;\n      var product = this.productManager.currentProducts[productEl.dataset.bfProductId];\n      if (!product) {\n        console.error(\"[Blink] Product not found in currentProducts:\", productEl.dataset.bfProductId);\n        return;\n      }\n      var variant = product === null || product === void 0 || (_product$variants3 = product.variants) === null || _product$variants3 === void 0 || (_product$variants3 = _product$variants3.edges) === null || _product$variants3 === void 0 || (_product$variants3 = _product$variants3[0]) === null || _product$variants3 === void 0 ? void 0 : _product$variants3.node;\n      var variantId = variant === null || variant === void 0 ? void 0 : variant.id;\n      if (!variant || !variant.availableForSale) {\n        button.disabled = true;\n        button.innerHTML = \"Out of stock\";\n        return;\n      }\n      if (!variantId) {\n        console.error(\"[Blink] Missing variant id.\");\n        return;\n      }\n      this.setButtonLoading(button, true);\n      this.cart.addToCart({\n        variantId: variantId,\n        quantity: quantity\n      }).then(function () {\n        button.innerHTML = _this4._checkSVG;\n        setTimeout(function () {\n          _this4.setButtonLoading(button, false);\n        }, 1500);\n        _this4.cartUI.openCartDrawer();\n      })[\"catch\"](function (err) {\n        button.innerHTML = \"Error\";\n        setTimeout(function () {\n          _this4.setButtonLoading(button, false);\n        }, 1500);\n        console.error(\"[Blink] Add to cart failed:\", err);\n      });\n    }\n\n    /**\n     * Sets loading state on the given button.\n     * @param {HTMLElement} button\n     * @param {boolean} isLoading\n     */\n  }, {\n    key: \"setButtonLoading\",\n    value: function setButtonLoading(button, isLoading) {\n      if (isLoading) {\n        button.disabled = true;\n        button.classList.add(\"bf-loading\");\n        if (!button.dataset.originalText) {\n          button.dataset.originalText = button.innerHTML;\n        }\n        button.innerHTML = this._loaderSVG;\n      } else {\n        button.disabled = false;\n        button.classList.remove(\"bf-loading\");\n        if (button.dataset.originalText) {\n          button.innerHTML = button.dataset.originalText;\n          delete button.dataset.originalText;\n        }\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/ui/ProductUI.js?");

/***/ }),

/***/ "./src/lib/utils.js":
/*!**************************!*\
  !*** ./src/lib/utils.js ***!
  \**************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Cache: () => (/* binding */ Cache),\n/* harmony export */   MoneyFormatter: () => (/* binding */ MoneyFormatter)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Simple localStorage-based cache with TTL.\n */\nvar Cache = /*#__PURE__*/function () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n  }\n  return _createClass(Cache, null, [{\n    key: \"set\",\n    value:\n    /**\n     * Sets a value in cache with TTL.\n     * @param {string} key\n     * @param {*} value\n     * @param {number} ttlMs - Time to live in milliseconds.\n     */\n    function set(key, value, ttlMs) {\n      var expires = Date.now() + ttlMs;\n      localStorage.setItem(key, JSON.stringify({\n        value: value,\n        expires: expires\n      }));\n    }\n    /**\n     * Gets a value from cache if not expired.\n     * @param {string} key\n     * @returns {*|null}\n     */\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var raw = localStorage.getItem(key);\n      if (!raw) return null;\n      try {\n        var _JSON$parse = JSON.parse(raw),\n          value = _JSON$parse.value,\n          expires = _JSON$parse.expires;\n        if (Date.now() > expires) {\n          localStorage.removeItem(key);\n          return null;\n        }\n        return value;\n      } catch (_unused) {\n        localStorage.removeItem(key);\n        return null;\n      }\n    }\n    /**\n     * Removes a value from cache.\n     * @param {string} key\n     */\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      localStorage.removeItem(key);\n    }\n  }]);\n}();\n\n/**\n * Formats money values according to a format string.\n */\nvar MoneyFormatter = /*#__PURE__*/function () {\n  function MoneyFormatter() {\n    _classCallCheck(this, MoneyFormatter);\n  }\n  return _createClass(MoneyFormatter, null, [{\n    key: \"format\",\n    value:\n    /**\n     * Formats an amount as a string.\n     * @param {number|string} amount\n     * @param {string} currency\n     * @param {string} [moneyFormat=\"{{amount}}{{currency_code}}\"]\n     * @returns {string}\n     */\n    function format(amount, currency) {\n      var moneyFormat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"{{amount}}{{currency_code}}\";\n      var formatted = moneyFormat || \"${{amount}}\";\n      formatted = formatted.replace(\"{{amount}}\", parseFloat(amount).toFixed(2));\n      formatted = formatted.replace(\"{{currency_code}}\", currency || \"\");\n      return formatted;\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://public-blinkwebflow/./src/lib/utils.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;